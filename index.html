<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cosmic Insights</title>
    <link rel="stylesheet" href="./style.css?v=2.1">
    <link rel="manifest" href="./manifest.json">
    <script src="./script.js?v=2.1" defer></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <nav class="top-nav">
            <h1>Cosmic <span class="highlight">Insights</span></h1>
            <button id="install-btn" class="btn btn-sm hidden" style="margin-top: 5px; background: rgba(255,215,0,0.2); width: auto; font-size: 0.8rem; padding: 5px 10px; border-radius: 5px; border: 1px solid var(--accent-gold); color: var(--accent-gold); cursor: pointer;">✨ Install App</button>
        </nav>

        <main id="main-content">
            <!-- VIEW: HOME (Zodiac Grid) -->
            <div id="home-view" class="view active">
                <p class="subtitle">Explore the mysteries of the cosmos</p>
                <div class="zodiac-grid" id="zodiac-grid">
                    <!-- Zodiac items injected by JS -->
                </div>
            </div>

            <!-- VIEW: SIGN DETAILS -->
            <div id="sign-view" class="view">
                <button class="back-btn" onclick="Cosmic.navigate('home')">← Back to Zodiac</button>
                <div class="glass-panel text-center">
                    <h1 id="sign-symbol" style="font-size: 4rem; margin-bottom: 0;"></h1>
                    <h2 id="sign-name"></h2>
                    <p class="date-range" id="sign-dates" style="color: var(--text-muted); font-size: 0.9rem;"></p>
                    <div style="display:flex; justify-content:center; gap:10px; margin-top:10px;">
                        <div class="badge"><span class="label">Element</span> <span id="sign-element" class="value"></span></div>
                        <div class="badge"><span class="label">Planet</span> <span id="sign-planet" class="value"></span></div>
                    </div>
                </div>
                
                <div class="glass-panel">
                    <h3>Personality</h3>
                    <p id="sign-personality" style="line-height: 1.6;"></p>
                </div>

                <div class="horoscope-section">
                    <div class="tabs">
                        <button class="tab-btn active" onclick="Cosmic.getHoro('today')">Today</button>
                        <button class="tab-btn" onclick="Cosmic.getHoro('tomorrow')">Tomorrow</button>
                    </div>
                    <div class="glass-panel">
                        <div id="horoscope-loading" class="hidden"><div class="spinner"></div> Connecting to stars...</div>
                        <div id="horoscope-error" class="hidden">Blocked by high clouds. <button class="btn btn-sm" onclick="Cosmic.getHoro('today')" style="background:none; border: 1px solid var(--text-muted); color: var(--text-muted); padding: 2px 8px; border-radius: 4px; cursor: pointer;">Retry</button></div>
                        <div id="horoscope-content">
                            <h3 id="horoscope-title" style="margin-bottom: 0.5rem;">Daily Reading</h3>
                            <p id="horoscope-text" style="line-height: 1.6; font-size: 1.05rem;">Loading celestial data...</p>
                            <small id="horoscope-date" style="display: block; margin-top: 1rem; color: var(--text-muted);"></small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: LOVE CALCULATOR -->
            <div id="compatibility-view" class="view">
                <h2 style="text-align: center; margin-bottom: 0.5rem;">Love Calculator</h2>
                <p class="subtitle">Check your match score</p>
                
                <form id="love-form" onsubmit="event.preventDefault(); Cosmic.calculate();">
                    <div class="glass-panel">
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display:block; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-muted);">First Person</label>
                            <select id="sign-a" class="select-input"></select>
                        </div>

                        <div class="heart-divider">❤</div>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="display:block; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-muted);">Second Person</label>
                            <select id="sign-b" class="select-input"></select>
                        </div>

                        <button type="submit" class="btn btn-primary" id="calc-btn">Analyze Compatibility</button>
                    </div>
                </form>

                <div id="results-area" class="hidden">
                    <button class="btn-secondary" onclick="Cosmic.reset()">Check Another Match</button>
                    <div class="glass-panel text-center">
                         <div class="match-header"><span id="res-sym-a"></span> <span class="heart-icon">❤</span> <span id="res-sym-b"></span></div>
                         <h2 id="res-names"></h2>
                         <div class="score-circle"><span id="res-percent">0%</span></div>
                         <p class="match-label">Cosmic Match Score</p>
                    </div>
                    
                    <div class="glass-panel" id="res-breakdown">
                        <!-- Bars injected here -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="Cosmic.navigate('home')">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                <span>Zodiac</span>
            </button>
            <button class="nav-item" onclick="Cosmic.navigate('compatibility')">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
                <span>Love</span>
            </button>
        </nav>
    </div>
</body>
</html>
